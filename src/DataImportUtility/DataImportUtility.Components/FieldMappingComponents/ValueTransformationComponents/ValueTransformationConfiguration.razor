@using DataImportUtility.Components.FieldMappingComponents.FieldTransformationComponents

@inherits FileImportUtilityComponentBase

<div class="value-transform-rule@(DefaultCssClass)"
     data-from-component="@nameof(FieldTransformationConfiguration)"
     data-component-instance="@InstanceId"
     data-mapper-state="@MapperStateId">

    <div class="transform-type-selector">
        <label class="section-title">
            Transformation Type:
        </label>

        <select class="@DefaultCssClass"
                @bind=_selectedTransformationType
                @bind:after=HandleTransformationChanged>
            @foreach (var transformType in Enum.GetValues<ValueTransformationType>()
#if !DEBUG
                .Where(x => x != ValueTransformationType.ConditionalTransformation)
#endif
            )
            {
                <option value="@transformType">@transformType.GetDisplayText()</option>
            }
        </select>
    </div>

    <ValueTransformationRuleDetails @bind-ValueTransformation=_selectedTransformation
                                    CurrentTransformationResult=CurrentTransformationResult
                                    NewTransformationResultAvailable=NewTransformationResultAvailable
                                    @bind-ValueTransformation:after=NotifyTransformationChanged
                                    ApplyDefaultCss=ApplyDefaultCss />
</div>
